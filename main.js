!function(){"use strict";class e{constructor(e,t){let{cardData:s,handleImageClick:n}=e;this._name=s.name,this._link=s.link,this._cardSelector=t,this._handleImageClick=n}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeButton),this._deleteButton.addEventListener("click",this._handleDeleteButton),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleDeleteButton=()=>{this._cardElement.remove(),this._cardElement=null};_handleLikeButton=()=>{this._likeButton.classList.toggle("card__like-button_active")};_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}generateCard(){return this._cardElement=this._getTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__subheading"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardTitleElement.textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_hideInputError(e){this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._errorClass)}_showInputError(e){this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkFormValidity(){return!this._inputElements.every((e=>e.validity.valid))}toggleButtonState(){if(this._checkFormValidity(this._inputElements))return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState(this._inputElements)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const s=".cards__list",n="#card-template",r="#card-image-modal",i="#profile-add-modal",o="#profile-edit-modal",a=".profile__title",l=".profile__subtitle";class c{constructor(e){this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close(),e.target.classList.contains("modal__close")&&this.close()}))}}class m extends c{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),e.target.reset()}))}}const u=document.querySelector("#profile-edit-button"),d=document.querySelector("#profile-add-button"),_=document.querySelector("#profile-title-input"),h=document.querySelector("#profile-subtitle-input"),p=document.forms["card-form"],E=new class extends c{constructor(e){super(e),this._cardImageElement=this._popupElement.querySelector(".card__image-modal"),this._cardTitleElement=this._popupElement.querySelector(".modal__description_image-popup")}open(e){this._cardImageElement.src=e._link,this._cardImageElement.alt=e._name,this._cardTitleElement.textContent=e._name,super.open()}}(r),g=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderer=n,this._renderedItems=s,this._element=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}addItems(e){this._element.prepend(e)}}({items:[{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"},{name:"Vanoise national Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"}],renderer:L},s),f=new m(i,(function(e){L({name:e.title,link:e.link}),f.close(),p.reset()})),v=new m(o,(function(e){S.setUserInfo(e),v.close()})),S=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}getUserInfo(){return{title:this._nameElement.textContent,description:this._jobElement.textContent}}setUserInfo(e){this._nameElement&&(this._nameElement.textContent=e.title),this._jobElement&&(this._jobElement.textContent=e.subtitle)}}(a,l);function L(t){const s=function(t){return new e({cardData:t,handleImageClick:e=>{E.open(e)}},n).generateCard()}(t);g.addItems(s)}g.renderItems(),E.setEventListeners(),f.setEventListeners(),v.setEventListeners(),u.addEventListener("click",(()=>{v.open();const e=S.getUserInfo();_.value=e.title,h.value=e.description,k["profile-form"].toggleButtonState()})),d.addEventListener("click",(()=>{f.open(),k["card-form"].toggleButtonState()}));const k={};var y;y={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(y.formSelector)).forEach((e=>{const s=new t(y,e),n=e.getAttribute("id");k[n]=s,s.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aERtRyxFQUFTbkcsRUFBWW9HLGFBQWEsTUFFeENKLEVBQWVHLEdBQVVELEVBQ3pCQSxFQUFVL0Qsa0JBQWtCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGNhcmREYXRhLCBoYW5kbGVJbWFnZUNsaWNrIH0sIGNhcmRTZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24pO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICBfaGFuZGxlTGlrZUJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH07XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiAodGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9XG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3N1YmhlYWRpbmdcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgfVxuXG4gIF9jaGVja0Zvcm1WYWxpZGl0eSgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcbiAgICApO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgY29uc3QgZm91bmRJbnZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkodGhpcy5faW5wdXRFbGVtZW50cyk7XG4gICAgaWYgKGZvdW5kSW52YWxpZCkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRFbGVtZW50cyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgbmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGVsZW1lbnRTZWxlY3RvciA9IHtcbiAgY2FyZFNlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICBwcmV2aWV3SW1hZ2VQb3B1cDogXCIjY2FyZC1pbWFnZS1tb2RhbFwiLFxuICBwcmV2aWV3QWRkRm9ybVBvcHVwOiBcIiNwcm9maWxlLWFkZC1tb2RhbFwiLFxuICBwcmV2aWV3UHJvZmlsZUZvcm1Qb3B1cDogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIHByb2ZpbGVUaXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZURlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybUlucHV0cyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybUlucHV0c1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtSW5wdXRzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpO1xuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vKiBJbXBvcnQgYWxsIHRoZSBjbGFzc2VzICovXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGVsZW1lbnRTZWxlY3Rvcixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZVN1YnRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtc3VidGl0bGUtaW5wdXRcIik7XG5jb25zdCBjYXJkQWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiY2FyZC1mb3JtXCJdO1xuXG4vKiBDcmVhdGUgY2xhc3MgaW5zdGFuY2VzICovXG5jb25zdCBjYXJkSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShlbGVtZW50U2VsZWN0b3IucHJldmlld0ltYWdlUG9wdXApO1xuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IGNyZWF0ZUNhcmQsXG4gIH0sXG4gIGVsZW1lbnRTZWxlY3Rvci5jYXJkU2VjdGlvblxuKTtcblxuY29uc3QgY2FyZEFkZEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBlbGVtZW50U2VsZWN0b3IucHJldmlld0FkZEZvcm1Qb3B1cCxcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcbik7XG5cbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIGVsZW1lbnRTZWxlY3Rvci5wcmV2aWV3UHJvZmlsZUZvcm1Qb3B1cCxcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcbik7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBlbGVtZW50U2VsZWN0b3IucHJvZmlsZVRpdGxlLFxuICBlbGVtZW50U2VsZWN0b3IucHJvZmlsZURlc2NyaXB0aW9uXG4pO1xuXG4vKiBJbml0aWFsaXplIGFsbCBpbnN0YW5jZXMgKi9cbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5jYXJkSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuY2FyZEFkZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZUVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyogRnVuY3Rpb25zIGZvciBoYW5kbGluZyBjYXJkIGNyZWF0aW9ucyBhbmQgZm9ybSBzdWJtaXRzICovXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZChjYXJkRGF0YSk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW1zKGNhcmRFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGNhcmREYXRhLFxuICAgICAgaGFuZGxlSW1hZ2VDbGljazogKGl0ZW0pID0+IHtcbiAgICAgICAgY2FyZEltYWdlUG9wdXAub3BlbihpdGVtKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBlbGVtZW50U2VsZWN0b3IuY2FyZFRlbXBsYXRlXG4gICk7XG4gIHJldHVybiBjYXJkRWxlbWVudC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQodXNlckRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICBwcm9maWxlRWRpdEZvcm1Qb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChjYXJkRGF0YSkge1xuICBjb25zdCBuYW1lID0gY2FyZERhdGEudGl0bGU7XG4gIGNvbnN0IGxpbmsgPSBjYXJkRGF0YS5saW5rO1xuICBjcmVhdGVDYXJkKHsgbmFtZSwgbGluayB9KTtcbiAgY2FyZEFkZEZvcm1Qb3B1cC5jbG9zZSgpO1xuICBjYXJkQWRkRm9ybS5yZXNldCgpO1xufVxuXG4vKiogbGlzdGVucyB0byBldmVudCBhbmQgaGFuZGxlcyBpdCAqL1xuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlRWRpdEZvcm1Qb3B1cC5vcGVuKCk7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VyRGF0YS50aXRsZTtcbiAgcHJvZmlsZVN1YnRpdGxlSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pO1xuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjYXJkQWRkRm9ybVBvcHVwLm9wZW4oKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJjYXJkLWZvcm1cIl0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pO1xuXG4vKiogVkFMSURBVElPTiAqL1xuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yKVxuICApO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FbGVtZW50KTtcbiAgICBjb25zdCBmb3JtSWQgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcblxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1JZF0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZS1tb2RhbFwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fZGVzY3JpcHRpb25faW1hZ2UtcG9wdXBcIlxuICAgICk7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSBkYXRhLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLl9uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGVsZW1lbnRTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbXMoaXRlbSkge1xuICAgIHRoaXMuX2VsZW1lbnQucHJlcGVuZChpdGVtKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhjYXJkRGF0YSkge1xuICAgIGlmICh0aGlzLl9uYW1lRWxlbWVudCkge1xuICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBjYXJkRGF0YS50aXRsZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2pvYkVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5zdWJ0aXRsZTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiY2FyZERhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfY2FyZEltYWdlRWxlbWVudCIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsIl9jYXJkVGl0bGVFbGVtZW50Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsIl9zaG93SW5wdXRFcnJvciIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJfaW5wdXRFbGVtZW50cyIsImV2ZXJ5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImV2dCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImVsZW1lbnRTZWxlY3RvciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1JbnB1dHMiLCJpbnB1dCIsInZhbHVlIiwiaW5wdXRWYWx1ZXMiLCJyZXNldCIsImVkaXRCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlU3VidGl0bGVJbnB1dCIsImNhcmRBZGRGb3JtIiwiZm9ybXMiLCJjYXJkSW1hZ2VQb3B1cCIsImRhdGEiLCJjYXJkU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9lbGVtZW50IiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbXMiLCJwcmVwZW5kIiwiY3JlYXRlQ2FyZCIsImNhcmRBZGRGb3JtUG9wdXAiLCJ0aXRsZSIsInByb2ZpbGVFZGl0Rm9ybVBvcHVwIiwidXNlckRhdGEiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzdWJ0aXRsZSIsImNhcmRFbGVtZW50IiwiZ2V0Q2FyZCIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdGlvbkNvbmZpZyIsInZhbGlkYXRvciIsImZvcm1JZCIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=